<!DOCTYPE html>





<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.8.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="Use nodejs to create web server123456789//need to include nodejs core moudul &apos;http&apos;const http = require(&apos;http&apos;);//and then create a listener to receive incomming message and return response objectcon">
<meta name="keywords" content="javascript,nodeJS,server,backend">
<meta property="og:type" content="article">
<meta property="og:title" content="Use node.js to create web server">
<meta property="og:url" content="http://yencheng.com/2019/09/02/nodeJS/index.html">
<meta property="og:site_name" content="yencheng&#39;s code blog">
<meta property="og:description" content="Use nodejs to create web server123456789//need to include nodejs core moudul &apos;http&apos;const http = require(&apos;http&apos;);//and then create a listener to receive incomming message and return response objectcon">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-09-05T11:49:44.073Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Use node.js to create web server">
<meta name="twitter:description" content="Use nodejs to create web server123456789//need to include nodejs core moudul &apos;http&apos;const http = require(&apos;http&apos;);//and then create a listener to receive incomming message and return response objectcon">
  <link rel="canonical" href="http://yencheng.com/2019/09/02/nodeJS/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Use node.js to create web server | yencheng's code blog</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">yencheng's code blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="http://yencheng.com/2019/09/02/nodeJS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="YENCHENG LIU">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yencheng's code blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Use node.js to create web server

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-09-02 17:13:08" itemprop="dateCreated datePublished" datetime="2019-09-02T17:13:08+09:00">2019-09-02</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-09-05 20:49:44" itemprop="dateModified" datetime="2019-09-05T20:49:44+09:00">2019-09-05</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/NodeJS/" itemprop="url" rel="index"><span itemprop="name">NodeJS</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <hr>
<h1 id="Use-nodejs-to-create-web-server"><a href="#Use-nodejs-to-create-web-server" class="headerlink" title="Use nodejs to create web server"></a>Use nodejs to create web server</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//need to include nodejs core moudul 'http'</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="comment">//and then create a listener to receive incomming message and return response object</span></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(req);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//start a process to keep it running to listen for incomming requests. Event loop will keep running</span></span><br><span class="line"><span class="comment">//first argument accept the port which can listen for the requests, if not, then defult port 80 will be used</span></span><br><span class="line">server.listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<p>Then we can set some respose for request like this</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(req.url, req.method, req.headers);</span><br><span class="line">    <span class="comment">//tell that we will response a html type content</span></span><br><span class="line">    res.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'text/html'</span>);</span><br><span class="line">    res.write(<span class="string">'&lt;html&gt;'</span>);</span><br><span class="line">    res.write(<span class="string">'&lt;head&gt;&lt;title&gt;My page&lt;/title&gt;&lt;/head&gt;'</span>);</span><br><span class="line">    res.write(<span class="string">'&lt;body&gt;&lt;h1&gt;Hello world&lt;/h1&gt;&lt;/body&gt;'</span>);</span><br><span class="line">    res.write(<span class="string">'&lt;/html&gt;'</span>);</span><br><span class="line">    <span class="comment">//once we end the response, we can't write it anymore</span></span><br><span class="line">    res.end();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure>

<p>More about http headers<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers" target="_blank" rel="noopener">link</a></p>
<p>We also can do some judgment</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> url = req.url;</span><br><span class="line">    <span class="keyword">const</span> method = req.method;</span><br><span class="line">    <span class="keyword">if</span>(url === <span class="string">'/'</span>)&#123;</span><br><span class="line">        res.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'text/html'</span>);</span><br><span class="line">        res.write(<span class="string">'&lt;html&gt;'</span>);</span><br><span class="line">        res.write(<span class="string">'&lt;head&gt;&lt;title&gt;My page&lt;/title&gt;&lt;/head&gt;'</span>);</span><br><span class="line">        res.write(<span class="string">'&lt;body&gt;&lt;form action="/message" method="POST"&gt;&lt;input type="text" name="message"&gt;&lt;/input&gt;&lt;button type="submit"&gt;send&lt;/button&gt;&lt;/form&gt;&lt;/body&gt;'</span>);</span><br><span class="line">        res.write(<span class="string">'&lt;/html&gt;'</span>);</span><br><span class="line">        <span class="keyword">return</span> res.end();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(url === <span class="string">'/message'</span> &amp;&amp; method === <span class="string">'POST'</span>)&#123;</span><br><span class="line">        fs.writeFileSync(<span class="string">'message.txt'</span>,<span class="string">'DUMMY'</span>);</span><br><span class="line">        <span class="comment">//set statuscode to 302 and then we can redirect to the '/'</span></span><br><span class="line">        res.statusCode = <span class="number">302</span>;</span><br><span class="line">        res.setHeader(<span class="string">'Location'</span>, <span class="string">'/'</span>);</span><br><span class="line">        <span class="keyword">return</span> res.end();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//once we end the response, we can't write it anymore</span></span><br><span class="line">    res.end();</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Streams-and-Buffers"><a href="#Streams-and-Buffers" class="headerlink" title="Streams and Buffers"></a>Streams and Buffers</h2><p>If we have incomming request, streams here will basically an ongoing process. The request will simply read by node in chunks(in multiple parts) and in the end at some point of time it’s done. Once it’s done we can start interact with the entire request. If you need to works with the single part, then buffers can help us to do that.<br>That’s adjust the above code for example</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(url === <span class="string">'/message'</span> &amp;&amp; method === <span class="string">'POST'</span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> body = [];</span><br><span class="line">    <span class="comment">//on method allow us to listen certain events</span></span><br><span class="line">    <span class="comment">//the data event will be fired whenever a new chunk is ready to be read</span></span><br><span class="line">    req.on(<span class="string">'data'</span>, (chunk) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(chunk);</span><br><span class="line">        body.push(chunk);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//end event will be fired once it's done parsing the incomming request data or the incomming requests</span></span><br><span class="line">    req.on(<span class="string">'end'</span>, () =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> parseBody = Buffer.concat(body).toString();</span><br><span class="line">        <span class="built_in">console</span>.log(parseBody);</span><br><span class="line">    &#125;)</span><br><span class="line">    fs.writeFileSync(<span class="string">'message.txt'</span>,<span class="string">'DUMMY'</span>);</span><br><span class="line">    <span class="comment">//set statuscode to 302 and then we can redirect to the '/'</span></span><br><span class="line">    res.statusCode = <span class="number">302</span>;</span><br><span class="line">    res.setHeader(<span class="string">'Location'</span>, <span class="string">'/'</span>);</span><br><span class="line">    <span class="keyword">return</span> res.end();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>Input “Hello!” and that’s see the output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//the chunks</span><br><span class="line">&lt;Buffer 6d 65 73 73 61 67 65 3d 48 65 6c 6c 6f 25 32 31&gt;</span><br><span class="line">message=Hello%21</span><br><span class="line">//&quot;message&quot; is because I named the input html&apos;s name property to &quot;message&quot;</span><br></pre></td></tr></table></figure>

<p>Can use module.exports to split the routes logical code</p>
<p>app.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = <span class="built_in">require</span>(<span class="string">'./routes'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(routes.handler);</span><br><span class="line"><span class="built_in">console</span>.log(routes.someText);</span><br><span class="line">server.listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure>

<p>routes.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">onst fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> requestHandler = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> url = req.url;</span><br><span class="line">    <span class="keyword">const</span> method = req.method;</span><br><span class="line">    <span class="keyword">if</span> (url === <span class="string">'/'</span>) &#123;</span><br><span class="line">        <span class="comment">//some code</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (url === <span class="string">'/message'</span> &amp;&amp; method === <span class="string">'POST'</span>) &#123;</span><br><span class="line">        <span class="comment">//some code</span></span><br><span class="line">        <span class="keyword">return</span> req.on(<span class="string">'end'</span>, () =&gt; &#123;</span><br><span class="line">            <span class="comment">//some code</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//some code</span></span><br><span class="line">  res.end();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// module.exports = requestHandler;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// module.exports = &#123;</span></span><br><span class="line"><span class="comment">//     handler: requestHandler,</span></span><br><span class="line"><span class="comment">//     someText: 'Some hard coded text'</span></span><br><span class="line"><span class="comment">// &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// module.exports.handler = requestHandler;</span></span><br><span class="line"><span class="comment">// module.exports.someText = 'Some text';</span></span><br><span class="line"></span><br><span class="line">exports.handler = requestHandler;</span><br><span class="line">exports.someText = <span class="string">'Some hard coded text'</span>;</span><br></pre></td></tr></table></figure>

<h2 id="Using-express-js"><a href="#Using-express-js" class="headerlink" title="Using express.js"></a>Using express.js</h2><p>It’s will be a lot of work if we write the code by our own, so we can use the third party package to make things simply. The express is the most popular package and it has a lot of benefit for us to choose it.</p>
<p>The request will funneled through a bunch of functions (middleware) by express.js untill we send a response. And this is pluggable nature of express.js, where we can easily add other third party packages.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//const http = require('http');</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);<span class="comment">//express inculde 'http' for us</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="comment">//use() is defined by express and allow us to add a middleware function</span></span><br><span class="line">app.use(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'In the middleware!'</span>);</span><br><span class="line">    next(); <span class="comment">// Allows the request to continue to the next middleware in line</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.use(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'In another middleware!'</span>);</span><br><span class="line">    <span class="comment">//Content-Type is set to html/text by express.js defult</span></span><br><span class="line">    res.send(<span class="string">'&lt;h1&gt;Hello from Express!&lt;/h1&gt;'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//const server = http.createServer(app);</span></span><br><span class="line"><span class="comment">//server.listen(3000);</span></span><br><span class="line">app.listen(<span class="number">3000</span>);<span class="comment">//The same of above two line</span></span><br></pre></td></tr></table></figure>

<p>We also can use<br>app.post()<br>app.get()<br>to execute certain code only if the post request or get request(same of the patch, put, delete).<br>Otherwise they work just like app.use().</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);<span class="comment">//need to install body-parser</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="comment">//can help us parse the request data like we use Buffer without express</span></span><br><span class="line"><span class="comment">//in the bodyParser.urlencoded() function, it already call next() for us</span></span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">false</span>&#125;));</span><br><span class="line"><span class="comment">//must above the "app.use('/',...) block", or it will be never execute. Unless we set app.use('/') to app.get('/'). </span></span><br><span class="line">app.use(<span class="string">'/add-product'</span>, (req, res, next) =&gt; &#123;</span><br><span class="line">  res.send(<span class="string">'&lt;form action="/product" method="POST"&gt;&lt;input type="text" name="title"&gt;&lt;button type="submit"&gt;Add Product&lt;/button&gt;&lt;/form&gt;'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.post(<span class="string">'/product'</span>, (req, res, next) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(req.body);</span><br><span class="line">    res.redirect(<span class="string">'/'</span>);<span class="comment">//it do all the job for us so we don't need to set status code or set header anymore</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//if we set app.use() to app.get() or app.post(), it will do exactly when the path is matched.</span></span><br><span class="line">app.use(<span class="string">'/'</span>, (req, res, next) =&gt; &#123;</span><br><span class="line">  res.send(<span class="string">'&lt;h1&gt;Hello from Express!&lt;/h1&gt;'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure>


    </div>

    
    
    
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/javascript/" rel="tag"># javascript</a>
            
              <a href="/tags/nodeJS/" rel="tag"># nodeJS</a>
            
              <a href="/tags/server/" rel="tag"># server</a>
            
              <a href="/tags/backend/" rel="tag"># backend</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2019/08/28/mongodb/" rel="next" title="mongoDB 基礎3">
                  <i class="fa fa-chevron-left"></i> mongoDB 基礎3
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2019/09/05/nodeJS/" rel="prev" title="nodeJS - use express.js to create routes">
                  nodeJS - use express.js to create routes <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Use-nodejs-to-create-web-server"><span class="nav-number">1.</span> <span class="nav-text">Use nodejs to create web server</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Streams-and-Buffers"><span class="nav-number">1.1.</span> <span class="nav-text">Streams and Buffers</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Using-express-js"><span class="nav-number">1.2.</span> <span class="nav-text">Using express.js</span></a></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">YENCHENG LIU</p>
  <div class="site-description" itemprop="description"></div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span>
        </a>
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:yourname@gmail.com" title="E-Mail &rarr; mailto:yourname@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YENCHENG LIU</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.4.0</div>

        












        
      </div>
    </footer>
  </div>

  


  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.0"></script><script src="/js/motion.js?v=7.4.0"></script>
<script src="/js/schemes/pisces.js?v=7.4.0"></script>

<script src="/js/next-boot.js?v=7.4.0"></script>



  





















  

  

  

</body>
</html>
